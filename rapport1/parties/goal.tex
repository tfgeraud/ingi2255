Dans cette partie, nous vous présentons le modèle de buts. En 
particulier, nous vous présentons la formalisation des états impliqués
par les buts que nous avons
utilisé pour découler de manière rapide et cohérente les opérations, les
machines à états et augmenter la cohérence de notre modèle de buts.

\subsection{Première couche}

	Cette section présente les divers buts de plus haut niveau. Ces buts
	sont les buts principaux de notre système. 

	\insertfigure{goal1}{Les buts de plus haut niveau}
	\begin{equation*}
		\begin{array}{rcl}
			AppropriateMedicalCareGiven(i:Incident)
			& = & \exists AmbulanceMobilized(a, i), \\
			&   & \hspace{0.5cm} \wedge AmbulanceOnScene(a, i) \\
			&   & \hspace{0.5cm} \wedge \#a.medicalCare = 1 \\
			&   & \hspace{0.5cm} \wedge \#i.victim.medicalCare = 1 \\
			&   & \hspace{0.5cm} \wedge a.medicalCare \\
			&   & \hspace{1cm} \rightarrow i.victim.medicalCare \\ 
			CallReceived(i:Incident)
			& = & \exists c: Call, \\
			&   & c.about \rightarrow i \\
			&   & \wedge \#c.about = 1 \\
			&   & \wedge \#i.about = 1 \\
		\end{array}
	\end{equation*}

\subsection{Seconde couche}
	
	La \og seconde couche \fg est consitué des enfants des buts
	feuilles de la première couche. Nous les avons présenté ci-dessous. 

	\insertfigure{goal2}{Le détail des sous-buts de haut niveau.}
	
	La formalisation des états atteins par les buts feuilles du premier fils sont
	les suivants.
	\begin{equation*}
		\begin{array}{rcl}
			IncidentInfoKnown(i:IncidentInfo)  
			& = & IncidentInfoProcessed(i) \\
			
			AmbulanceMobilized(a: Ambulance) 
			& = & \exists i:Incident, \\
			&   & MobilizationOrderConfirmed(a, i) \\
		\end{array}
	\end{equation*}
	
	La formalisation des états atteins par les buts feuilles du second fils sont
	les suivants.
	\begin{equation*}
		\begin{array}{rcl}
			IncidentInfoRecorded(c:Call)  
			& = & \exists j:IncidentInfo, \exists Incident, \\
			&   & c.about \rightarrow i \\
			&   & \wedge j.reporting \rightarrow c \\
			&   & \wedge j.localisation \neq nul \\
			&   & \wedge j.description \neq null \\
			&   & \wedge j.victimAge \neq null \\
			&   & \wedge j.victimPregrant \neq null \\
			&   & \wedge j.id \neq null \\
			
			IncidentInfoProcessed(j:IncidentInfo)  
			& = & j.pos \neq null \\
			&   & \wedge j.ambulanceKindNeeded \neq null \\
			&   & \exists c:Call, \exists i:Incident, \\
			&   & (c.about \rightarrow i \wedge c.reporting \rightarrow j) \\
		\end{array}
	\end{equation*}
	
	La formalisation des états atteins par les buts feuilles du troisième fils sont
	les suivants.	
	\begin{equation*}
		\begin{array}{rcl}
			AmbulanceChosen(i:IncidentInfo)  
			& = & \exists a:AmbulanceInfo, a.id = b.id  \\
			&   & \wedge a.choice = 1 \\
			&   & \wedge \#i.choice = 1 \\
			&   & \wedge a.choice \rightarrow i \\
			
			\multicolumn{3}{l}{MobilizationOrderTransmitted(a: Ambulance, i:Incident)} \\ 
			& = & \exists m: MobilizationOrder, \\
			&   & m.ambulanceId = a \\
			&   & \wedge m.incident = 1 \\
			
			\multicolumn{3}{l}{MobilizationOrderConfirmed(a:Ambulance, i:Incident)} \\ 
			& = & \exists m:MoblisationOrder: \\
			&   & m.ambulance = a \wedge m.incident = 1 \\
			&   & \wedge m.confirmed = True \\
		\end{array}
	\end{equation*}
	
	La formalisation des états atteins par les buts feuilles du dernier fils sont
	les suivants.		
	\begin{equation*}
		\begin{array}{rcl}
			AmbulanceOnScene(a:Ambulance, I:Incident)
			& = & a.pos = i.pos \\
		\end{array}
	\end{equation*}


\subsection{Troisième couche}
\insertfigure{goal3}{Troisième niveau, raffinement du but \textit{AmbulanceChosenWhenIncidentInfoKnown}}
\begin{equation*}
\begin{array}{rcl}
\multicolumn{3}{l}{AmbulanceAvailabilityKnown(a: Ambulance)} \\
& = & \exists b: AmbulanceInfo, \\
&   & b.id = a.id \\
&   & \wedge \#b.mobilized = \#a.miblized \\

\multicolumn{3}{l}{AmbulanceKindKnown(a: Ambulance)} \\
& = & \exists b: AmbulanceInfo, \\
&   & b.id = a.id \\
&   & \wedge typeof(a) = b.kind \\

\multicolumn{3}{l}{AmbulancePositionKnown(a:Ambulance)} \\ 
& = & \exists b:AmbulanceInfo, \\
&   & b.id = a.id \\
&   & \wedge a.pos \approxeq b.pos \\
\end{array}
\end{equation*}
\begin{equation*}
\begin{array}{rcl}
\multicolumn{3}{l}{PositionAccurate(a:Ambulance)} \\ 
& = & \exists b:AmbulanceInfo, \\
&   & a.id = b.id \\
&   & \wedge b.pos = a.pos \\
\end{array}
\end{equation*}

\insertfigure{goal4}{Third level}
\insertfigure{goal5}{Third level}


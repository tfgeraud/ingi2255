\documentclass{report}

\usepackage[utf8]{inputenc}
\usepackage{style-report}

% L'en-tête et la mise en page sera différente
% Merci de ne pas faire de mise en page dans le document !
\title{London Ambulance System}
\subtitle{Architecture logicielle}
\author{\normalsize{Groupe 2}\\
\footnotesize{
Simon Busard, \\
Antoine Cailliau, \\
Laurent Champon,\\
Erick Lavoie, \\
Quentin Pirmez,\\
Frederic Van der Essen, \\
Géraud Talla Fotsing}}

\date{\today}

% Pour modifier la géométrie de la page
\usepackage{geometry}
\geometry{a4paper,left=3cm,right=3cm,top=2.5cm,bottom=4cm}

\newlength{\realtextwidth}
\setlength{\realtextwidth}{\textwidth}
\newcommand{\insertfiguremargin}[2]{
	\begin{figure}[!h]
	\noindent\begin{minipage}[!h]{\marginparsep+\marginparwidth+\marginparpush+\textwidth}
		\begin{minipage}[t]{\realtextwidth}
			\vspace{0pt}
			\includegraphics[width=\realtextwidth]{images/#1.png}
		\end{minipage}
		\hspace{\marginparsep}
		\begin{minipage}[t]{\marginparwidth+\marginparpush}
			\vspace{0pt}
			\setcaptionwidth{\marginparwidth+\marginparpush}
			\caption{#2}\label{fig:#1}
			\setcaptionwidth{0.9\realtextwidth}
		\end{minipage}		
	\end{minipage}
	\end{figure}

}

\setlength{\realtextwidth}{\textwidth}
\newcommand{\insertfigure}[2]{
	\begin{figure}[!h]
	\noindent\begin{minipage}[!h]{\marginparsep+\marginparwidth+\marginparpush+\textwidth}
		\begin{minipage}[t]{\textwidth}
			\vspace{0pt}
			\includegraphics[width=\textwidth]{images/#1.png}
		\end{minipage}
		
		\hspace{\realtextwidth}
		\hspace{\marginparsep}
		\begin{minipage}[t]{\marginparwidth+\marginparpush}
			\vspace{0.5cm}
			\setcaptionwidth{\marginparwidth+\marginparpush}
			\caption{#2}\label{fig:#1}
			\setcaptionwidth{0.9\realtextwidth}
		\end{minipage}		
	\end{minipage}
	\end{figure}

}

\begin{document}

\setlength{\parskip}{1em}
\startdocument

\maketitle
\setcounter{tocdepth}{1}
\tableofcontents

\chapter{Architecture logique}
	
	Cette section présente les alternatives d'architecture que nous
	avons exploré. Ensuite, nous détaillons l'architecture que nous
	avons finalement choisie.

	\section{Architectures évaluées }
		
		Cette section présente les deux autres alternatives que nous 
		avons exploré, à savoir l'architecture \textit{pipe} et l'architecture
		\textit{bus}.
	
		\input{parties/pipe-style.tex}
		\input{parties/bus-style.tex}
	
	\section{Architecture finale}
		Cette section présente l'architecture du système de gestion d'ambulance.
		La section 1.3.1 présente les définitions des différents modules, 
		la section 1.3.2 présente les liens entre ces différents modules, 
		la section 1.3.3 présente la gestion des divers obstacles au sein 
		de notre architecture, la section 1.3.4 présente les évolutions du 
		système, la section 1.3.5 justifie l'utilisation des liens USE au sein
		de l'architecture. La section 1.3.6. présente la justification des
		liens USE au sein du simulateur.
	
		\insertfiguremargin{logic-sys}{Architecture logique pour la partie du 
		système.}
		\input{parties/arch-finale.tex}
		\input{parties/logical.tex}
		
		\input{parties/use-simulateur.tex}
		
\chapter{Architecture physique}
	\input{parties/phys.tex}

\chapter{Évènements à l'interface}
	\input{parties/messages.tex}

\chapter{Plan de développement}
	\input{parties/plan.tex}

\chapter{Spécifications externes des modules}

\end{document}
